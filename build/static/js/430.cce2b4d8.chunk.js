"use strict";(self.webpackChunkcliennt=self.webpackChunkcliennt||[]).push([[430],{9185:function(e,a,t){t.d(a,{Z:function(){return T}});var n=t(1413),r=t(4165),s=t(5861),i=t(9439),c=t(6296),l=t(3188),u=t(9553),o=t(5886),m=t(3344),d=t(3734),p=t(7309),x=t(5873),f=t(2426),g=t.n(f),h=t(2791),b=t(6871),v=t(8316),Z=t(3845),j=t(8108),k=t(3153),w=t(8428),y=t(2199),N=t(9555),S=t(7083),C=t(184),I=function(e){return e.loading?(0,C.jsx)("div",{className:"absolute w-full h-[100vh] flex justify-center items-center z-50 bg-transparent",children:(0,C.jsx)(S.Z,{size:"large"})}):(0,C.jsx)(C.Fragment,{})},F={name:{label:"\xdcr\xfcn Ad\u0131",name:"name"},price:{label:"\xdcr\xfcn Fiyat\u0131",name:"price"},stock:{label:"Stok",name:"stock"},images:{label:"G\xf6rseller",name:"images"},categories:{label:"Hangi Kategoriye/Kategorilere Ait",name:"categories"},descriptionn:{label:"\xdcr\xfcn Hakk\u0131nda",name:"description"}},A={name:{message:"\xdcr\xfcn Ad\u0131 Zorunludur!"},price:{message:"Fiyat Girmek Zorunludur!"},stock:{message:"Stok Adedi Zorunludur!"},categories:{message:"Kategori Se\xe7mediniz!"}},T=function(e){var a,t=e.isEdit,f=(0,h.useState)([]),S=(0,i.Z)(f,2),T=S[0],B=S[1],E=(0,h.useState)({url:"",visible:!1}),P=(0,i.Z)(E,2),G=P[0],H=P[1],z=(0,h.useState)(!1),Y=(0,i.Z)(z,2),L=Y[0],q=Y[1],K=(0,h.useState)(!1),M=(0,i.Z)(K,2),O=M[0],D=M[1],V=(0,h.useState)(""),_=(0,i.Z)(V,2),R=_[0],U=_[1],J=l.Z.useForm(),Q=(0,i.Z)(J,1)[0],W=(0,k.CG)((function(e){return e.product.selectedProduct})),X=(0,k.CG)((function(e){return e.category.initialState})),$=(0,b.TH)(),ee=(0,k.TL)();(0,h.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(a){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N._7.getProductById(a);case 2:t=e.sent,n=t.data,ee((0,w.CE)(n)),q(!1);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();W.id||(q(!0),e($.pathname.split("product/edit/")[1]))}),[W,ee,$.pathname]);var ae=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(a){var s,i,l,u,o,m,d,p,x,f,g,h,b,v;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:q(!0),s=[],i=[],l=!1,u=!1,e.prev=5,m=(0,c.Z)(T);case 7:return e.next=9,m.next();case 9:if(!(l=!(d=e.sent).done)){e.next=19;break}if(!(p=d.value).originFileObj){e.next=16;break}return e.next=14,Z.o(p.originFileObj);case 14:x=e.sent,s.push(x.split("base64,")[1]);case 16:l=!1,e.next=7;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(5),u=!0,o=e.t0;case 25:if(e.prev=25,e.prev=26,!l||null==m.return){e.next=30;break}return e.next=30,m.return();case 30:if(e.prev=30,!u){e.next=33;break}throw o;case 33:return e.finish(30);case 34:return e.finish(25);case 35:if(a.categories.forEach((function(e,a){e.value?i.push(e.value):i.push(e)})),f={categories:i,name:a.name,images:s.length>0?s:null,price:Number(a.price),stock:Number(a.stock),description:a.description.trim()},e.prev=37,!t){e.next=49;break}return g=(0,n.Z)({},f),W.images&&W.images.forEach((function(e){s.push(e)})),s.length>0&&(g.images=s),e.next=44,N._7.updateProductById(W.id,g);case 44:h=e.sent,b=h.data,ee((0,w.CE)(b)),e.next=53;break;case 49:return e.next=51,N._7.createProdutc(f);case 51:v=e.sent,v.data;case 53:ee((0,y.sc)({isNotification:!0,message:"\u0130\u015flem Ba\u015far\u0131l\u0131",description:t?"\xdcr\xfcn G\xfcncellemesi Ba\u015far\u0131l\u0131":"Yeni \xfcr\xfcn\xfcn\xfcz sat\u0131\u015fa sunuldu",placement:"top",status:"success"})),t||Q.resetFields(),e.next=60;break;case 57:e.prev=57,e.t1=e.catch(37),ee((0,y.sc)({isNotification:!0,message:"\u0130\u015flem Ba\u015far\u0131s\u0131z",description:e.t1.message,placement:"top",status:"error"}));case 60:return e.prev=60,q(!1),e.finish(60);case 63:case"end":return e.stop()}}),e,null,[[5,21,25,35],[26,,30,34],[37,57,60,63]])})));return function(a){return e.apply(this,arguments)}}(),te=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var a,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O){e.next=17;break}if(!(R.trim().length<1)){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,N.GN.addCategory({name:R.trim()});case 6:a=e.sent,t=a.data,ee((0,j.i8)(t)),D(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),ee((0,y.sc)({isNotification:!0,message:"\u0130\u015flem Ba\u015far\u0131s\u0131z",description:"",placement:"top",status:"error"}));case 15:e.next=18;break;case 17:D(!0);case 18:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(){return e.apply(this,arguments)}}();return t&&!W.id?(0,C.jsx)(I,{loading:L}):(0,C.jsxs)("div",{className:"relative",children:[(0,C.jsxs)(l.Z,{layout:"vertical",onFinish:ae,form:Q,initialValues:{name:t?W.name:void 0,price:t?W.price:void 0,stock:t?W.stock:void 0,description:t?W.description:void 0,categories:t?W.categories:[]},children:[t&&W.images&&W.images.length>=4?null:(0,C.jsx)(l.Z.Item,{label:F.images.label,name:F.images.name,children:(0,C.jsx)(u.Z,{action:"/",listType:"picture-card",fileList:T,onChange:function(e){var a=e.fileList;a.forEach((function(e){return e.status="success"})),B(a)},onPreview:function(e){return H({url:e.thumbUrl||"",visible:!0})},className:"bg-transparent",children:t&&W.images?(null===(a=W.images)||void 0===a?void 0:a.length)+T.length>=4?null:(0,C.jsx)("img",{src:v.ci.BH,alt:"icon"}):T.length>=4?null:(0,C.jsx)("img",{src:v.ci.BH,alt:"icon"})})}),(0,C.jsx)(l.Z.Item,{rules:[{required:!0,message:A.name.message}],label:F.name.label,name:F.name.name,children:(0,C.jsx)(o.Z,{autoComplete:"off",className:"max-w-[500px]"})}),(0,C.jsx)(l.Z.Item,{rules:[{required:!0,message:A.price.message}],label:F.price.label,name:F.price.name,children:(0,C.jsx)(m.Z,{stringMode:!0,min:0,className:"w-full sm:w-[500px]",addonAfter:"\u20ba"})}),(0,C.jsx)(l.Z.Item,{rules:[{required:!0,message:A.stock.message}],label:F.stock.label,name:F.stock.name,children:(0,C.jsx)(o.Z,{type:"number",min:1,className:"max-w-[500px]",addonAfter:"adet"})}),(0,C.jsx)(l.Z.Item,{label:F.descriptionn.label,name:F.descriptionn.name,children:(0,C.jsx)(o.Z.TextArea,{rows:4,maxLength:5e3,className:"!max-w-[500px]"})}),(0,C.jsx)(l.Z.Item,{rules:[{required:!0,message:A.categories.message}],label:F.categories.label,name:F.categories.name,children:(0,C.jsx)(d.Z,{defaultValue:t?W.categories:[],labelInValue:!0,mode:"multiple",className:"max-w-[500px]",children:X.map((function(e){return(0,C.jsx)(d.Z.Option,{children:e.name},e.id)}))})}),(0,C.jsxs)("div",{className:"max-w-[500px] mb-4 flex flex-row items-center space-x-4",children:[O&&(0,C.jsx)(o.Z,{className:"max-w-[500px]",value:R,onChange:function(e){return U(e.target.value)}}),(0,C.jsxs)(p.Z,{className:"m-0",onClick:te,children:[O?"":"Yeni ","Olu\u015ftur"]})]}),t&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(l.Z.Item,{label:"T\u0131klanma Say\u0131s\u0131",children:(0,C.jsx)(o.Z,{disabled:!0,value:W.showCount,className:"max-w-[500px]"})}),(0,C.jsx)(l.Z.Item,{label:"Sat\u0131\u015fa Sunuldu\u011fu Tarih",children:(0,C.jsx)(o.Z,{className:"max-w-[500px]",disabled:!0,value:g()(W.createdAt.toString()).format("DD/MM/YYYY HH:mm")})})]}),(0,C.jsx)(l.Z.Item,{className:"max-w-[500px] flex flex-row justify-end ",children:(0,C.jsx)(p.Z,{type:"primary",htmlType:"submit",children:"Kaydet"})})]}),(0,C.jsx)(x.Z,{visible:G.visible,footer:null,title:null,onCancel:function(){return H({url:"",visible:!1})},width:500,bodyStyle:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,C.jsx)("img",{src:G.url,alt:"clicked-img",className:"object-contain"})})]})}},3845:function(e,a,t){t.d(a,{o:function(){return n},y:function(){return r}});var n=function(e){return new Promise((function(a,t){var n=new FileReader;n.onload=function(e){var t;a(null===(t=e.target)||void 0===t?void 0:t.result)},n.onerror=function(e){t(e)},n.readAsDataURL(e)}))},r=function(e){return"data:image/png;base64,"+e}},6781:function(e,a,t){t.r(a);var n=t(1413),r=(t(2791),t(5717)),s=t(9185),i=t(3845),c=t(3153),l=(t(3037),t(8688),t(184));a.default=function(){var e=(0,c.CG)((function(e){return e.product}));return(0,l.jsx)("div",{className:"p-3 flex-col",children:(0,l.jsxs)("div",{className:"flex flex-row flex-wrap justify-between",children:[(0,l.jsx)("div",{className:"w-full md:max-w-[500px]",children:(0,l.jsx)(s.Z,{isEdit:!0})}),(0,l.jsx)("div",{className:"container px-auto my-auto h-auto lg:w-[calc(100%-800px)] ",children:e.selectedProduct.images&&(0,l.jsx)(r.Z,(0,n.Z)((0,n.Z)({},{accessibility:!1,arrows:!1,dots:!0,fade:!0,autoplay:!0,speed:500,slidesToShow:1,slidesToScroll:1,centerMode:!0}),{},{children:e.selectedProduct.images.map((function(e){return(0,l.jsx)("div",{children:(0,l.jsx)("img",{alt:"",src:i.y(e)})})}))}))})]})})}}}]);
//# sourceMappingURL=430.cce2b4d8.chunk.js.map