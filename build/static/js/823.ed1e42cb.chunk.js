"use strict";(self.webpackChunkcliennt=self.webpackChunkcliennt||[]).push([[823],{7823:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var r=n(4165),a=n(5861),i=n(9439),s=n(5945),c=n(7309),l=n(5198),o=n(9421),u=n(2426),d=n.n(u),f=n(2791),p=n(8316),m=n(8726),x=n(3153),h=n(8428),N=n(2199),g=n(8249),v=n(9555),y=[{text:"ONAY BEKLEN\u0130YOR",value:"ONAY BEKLEN\u0130YOR"},{text:"ONAYLANDI",value:"ONAYLANDI"},{text:"REDDED\u0130LD\u0130",value:"REDDED\u0130LD\u0130"}],k=n(184),D=function(){var e=(0,f.useState)([]),t=(0,i.Z)(e,2),n=t[0],u=t[1],D=(0,x.CG)((function(e){return e.product})),A=(0,x.CG)((function(e){return e.notification.isLoading})),E=(0,x.TL)();(0,f.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E((0,N.wt)({isLoading:!0})),e.next=4,v._7.getMyPendingOrders();case 4:t=e.sent,n=t.data,E((0,h.qQ)(n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:return e.prev=12,E((0,N.wt)({isLoading:!1})),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(){return e.apply(this,arguments)}}();e()}),[E]),(0,f.useEffect)((function(){if(D.orders.length>0){var e=[];D.orders.forEach((function(t){var n;e.push({id:t.id,actions:"",customer:t.customerId.firstName.concat(" ",t.customerId.lastName),date:t.createdAt.toString(),answerDate:null===(n=t.answerAt)||void 0===n?void 0:n.toString(),name:t.productId.name,piece:t.piece,takings:t.piece*t.productId.price,status:t.isAnswer?t.isAccept?"ONAYLANDI":"REDDED\u0130LD\u0130":"ONAY BEKLEN\u0130YOR"})})),u(e)}}),[D.orders]);var j=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a,i,s,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v._7.updateOrderById(n,{isAccept:t});case 3:if(a=e.sent,i=a.data,s=m.F2(i,D.orders),!t){e.next=11;break}if(c=D.orders.find((function(e){return e.id===n}))){e.next=10;break}return e.abrupt("return");case 10:E((0,g.PM)({balance:c.piece*c.productId.price}));case 11:E((0,h.qQ)(s)),E((0,N.sc)({message:"G\xfcncelleme Ba\u015far\u0131l\u0131",description:"Sipari\u015f ".concat(t?"Onayland\u0131":"Reddedildi"),isNotification:!0,placement:"top",status:"success"})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),E((0,N.sc)({message:"G\xfcncelleme Ba\u015far\u0131s\u0131z",description:e.t0.message[0],isNotification:!0,placement:"top",status:"error"}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n){return e.apply(this,arguments)}}(),w=[{title:"\xdcr\xfcn Ad\u0131",dataIndex:"name",key:"name",render:function(e){return(0,k.jsx)("span",{className:"text-primary text-base font-semibold",children:e})}},{title:"Adet",dataIndex:"piece",key:"piece",sorter:function(e,t){return e.piece-t.piece}},{title:"Has\u0131lat",dataIndex:"takings",key:"takings",render:function(e){return(0,k.jsxs)("span",{className:"font-mono whitespace-nowrap",children:[e," \u20ba"]})},sorter:function(e,t){return e.takings-t.takings}},{title:"Sipari\u015f Durumu",dataIndex:"status",key:"status",filters:y,onFilter:function(e,t){return t.status===e}},{title:"Sipari\u015f Tarihi",dataIndex:"date",key:"date",render:function(e){return(0,k.jsx)("span",{className:"font-extrabold",children:d()(e).format("DD/MM/YYYY HH:mm")})}},{title:"M\xfc\u015fteri",dataIndex:"customer",key:"customer",render:function(e){return(0,k.jsx)("span",{className:"text-secondary font-semibold",children:e})}},{title:"",dataIndex:"actions",key:"actions",render:function(e,t){return(0,k.jsx)("div",{className:"flex flex-row flex-wrap justify-around",children:"ONAY BEKLEN\u0130YOR"!==t.status?(0,k.jsx)(s.Z,{title:"\u0130\u015flem Tarihiniz",children:(0,k.jsx)("span",{className:"font-extrabold",children:d()(t.answerDate).format("DD/MM/YYYY HH:mm")})}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(c.Z,{onClick:function(){return j(!1,t.id)},type:"primary",className:"!bg-red-500 !border-0",children:"REDDET"}),(0,k.jsx)(c.Z,{onClick:function(){return j(!0,t.id)},children:"ONAYLA"})]})})},width:"25%"}];return A?(0,k.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:(0,k.jsx)("img",{alt:"",src:p.j8.H})}):(0,k.jsxs)("div",{className:"p-3",children:[(0,k.jsx)("h3",{className:"text-primary font-bold text-xl",children:"M\xdc\u015eTER\u0130LER\u0130M\u0130N S\u0130PAR\u0130\u015eLER\u0130"}),D.orders.length>0?(0,k.jsx)("div",{className:"w-full   flex flex-col items-center",children:(0,k.jsx)(l.Z,{locale:{triggerAsc:"Artan S\u0131ralama",triggerDesc:"Azalan S\u0131ralama",cancelSort:"S\u0131ralamay\u0131 \u0130ptal Et",filterReset:!1,filterConfirm:"Uygula"},scroll:{x:!0},pagination:!1,className:"w-full",columns:w,dataSource:n})}):(0,k.jsx)("div",{className:"mt-5 flex flex-col items-center justify-center",children:(0,k.jsx)(o.Z,{description:"Maalesef Onay Bekleyen Sipari\u015f Yok",image:p.Wc.b,imageStyle:{width:"256px",height:"256px"},style:{fontSize:"22px",fontWeight:"700",display:"flex",flexDirection:"column",alignItems:"center"}})})]})}}}]);
//# sourceMappingURL=823.ed1e42cb.chunk.js.map