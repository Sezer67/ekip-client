"use strict";(self.webpackChunkcliennt=self.webpackChunkcliennt||[]).push([[966],{9185:function(e,a,n){n.d(a,{Z:function(){return B}});var t=n(1413),r=n(4165),s=n(5861),i=n(9439),c=n(6296),l=n(3188),u=n(9553),o=n(5886),m=n(3344),d=n(3734),p=n(7309),x=n(5873),f=n(2426),g=n.n(f),h=n(2791),b=n(6871),v=n(8316),Z=n(3845),j=n(8108),k=n(3153),w=n(8428),y=n(2199),N=n(9555),C=n(7083),S=n(184),I=function(e){return e.loading?(0,S.jsx)("div",{className:"absolute w-full h-[100vh] flex justify-center items-center z-50 bg-transparent",children:(0,S.jsx)(C.Z,{size:"large"})}):(0,S.jsx)(S.Fragment,{})},F={name:{label:"\xdcr\xfcn Ad\u0131",name:"name"},price:{label:"\xdcr\xfcn Fiyat\u0131",name:"price"},stock:{label:"Stok",name:"stock"},images:{label:"G\xf6rseller",name:"images"},categories:{label:"Hangi Kategoriye/Kategorilere Ait",name:"categories"},descriptionn:{label:"\xdcr\xfcn Hakk\u0131nda",name:"description"}},A={name:{message:"\xdcr\xfcn Ad\u0131 Zorunludur!"},price:{message:"Fiyat Girmek Zorunludur!"},stock:{message:"Stok Adedi Zorunludur!"},categories:{message:"Kategori Se\xe7mediniz!"}},B=function(e){var a,n=e.isEdit,f=(0,h.useState)([]),C=(0,i.Z)(f,2),B=C[0],E=C[1],H=(0,h.useState)({url:"",visible:!1}),T=(0,i.Z)(H,2),z=T[0],G=T[1],P=(0,h.useState)(!1),Y=(0,i.Z)(P,2),L=Y[0],q=Y[1],K=(0,h.useState)(!1),O=(0,i.Z)(K,2),D=O[0],M=O[1],V=(0,h.useState)(""),_=(0,i.Z)(V,2),R=_[0],U=_[1],J=l.Z.useForm(),Q=(0,i.Z)(J,1)[0],W=(0,k.CG)((function(e){return e.product.selectedProduct})),X=(0,k.CG)((function(e){return e.category.initialState})),$=(0,b.TH)(),ee=(0,k.TL)();(0,h.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(a){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N._7.getProductById(a);case 2:n=e.sent,t=n.data,ee((0,w.CE)(t)),q(!1);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();W.id||(q(!0),e($.pathname.split("product/edit/")[1]))}),[W,ee,$.pathname]);var ae=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(a){var s,i,l,u,o,m,d,p,x,f,g,h,b,v;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:q(!0),s=[],i=[],l=!1,u=!1,e.prev=5,m=(0,c.Z)(B);case 7:return e.next=9,m.next();case 9:if(!(l=!(d=e.sent).done)){e.next=19;break}if(!(p=d.value).originFileObj){e.next=16;break}return e.next=14,Z.o(p.originFileObj);case 14:x=e.sent,s.push(x.split("base64,")[1]);case 16:l=!1,e.next=7;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(5),u=!0,o=e.t0;case 25:if(e.prev=25,e.prev=26,!l||null==m.return){e.next=30;break}return e.next=30,m.return();case 30:if(e.prev=30,!u){e.next=33;break}throw o;case 33:return e.finish(30);case 34:return e.finish(25);case 35:if(a.categories.forEach((function(e,a){e.value?i.push(e.value):i.push(e)})),f={categories:i,name:a.name,images:s.length>0?s:null,price:Number(a.price),stock:Number(a.stock),description:a.description.trim()},e.prev=37,!n){e.next=49;break}return g=(0,t.Z)({},f),W.images&&W.images.forEach((function(e){s.push(e)})),s.length>0&&(g.images=s),e.next=44,N._7.updateProductById(W.id,g);case 44:h=e.sent,b=h.data,ee((0,w.CE)(b)),e.next=53;break;case 49:return e.next=51,N._7.createProdutc(f);case 51:v=e.sent,v.data;case 53:ee((0,y.sc)({isNotification:!0,message:"\u0130\u015flem Ba\u015far\u0131l\u0131",description:n?"\xdcr\xfcn G\xfcncellemesi Ba\u015far\u0131l\u0131":"Yeni \xfcr\xfcn\xfcn\xfcz sat\u0131\u015fa sunuldu",placement:"top",status:"success"})),n||Q.resetFields(),e.next=60;break;case 57:e.prev=57,e.t1=e.catch(37),ee((0,y.sc)({isNotification:!0,message:"\u0130\u015flem Ba\u015far\u0131s\u0131z",description:e.t1.message,placement:"top",status:"error"}));case 60:return e.prev=60,q(!1),e.finish(60);case 63:case"end":return e.stop()}}),e,null,[[5,21,25,35],[26,,30,34],[37,57,60,63]])})));return function(a){return e.apply(this,arguments)}}(),ne=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var a,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!D){e.next=17;break}if(!(R.trim().length<1)){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,N.GN.addCategory({name:R.trim()});case 6:a=e.sent,n=a.data,ee((0,j.i8)(n)),M(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),ee((0,y.sc)({isNotification:!0,message:"\u0130\u015flem Ba\u015far\u0131s\u0131z",description:"",placement:"top",status:"error"}));case 15:e.next=18;break;case 17:M(!0);case 18:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(){return e.apply(this,arguments)}}();return n&&!W.id?(0,S.jsx)(I,{loading:L}):(0,S.jsxs)("div",{className:"relative",children:[(0,S.jsxs)(l.Z,{layout:"vertical",onFinish:ae,form:Q,initialValues:{name:n?W.name:void 0,price:n?W.price:void 0,stock:n?W.stock:void 0,description:n?W.description:void 0,categories:n?W.categories:[]},children:[n&&W.images&&W.images.length>=4?null:(0,S.jsx)(l.Z.Item,{label:F.images.label,name:F.images.name,children:(0,S.jsx)(u.Z,{action:"/",listType:"picture-card",fileList:B,onChange:function(e){var a=e.fileList;a.forEach((function(e){return e.status="success"})),E(a)},onPreview:function(e){return G({url:e.thumbUrl||"",visible:!0})},className:"bg-transparent",children:n&&W.images?(null===(a=W.images)||void 0===a?void 0:a.length)+B.length>=4?null:(0,S.jsx)("img",{src:v.ci.BH,alt:"icon"}):B.length>=4?null:(0,S.jsx)("img",{src:v.ci.BH,alt:"icon"})})}),(0,S.jsx)(l.Z.Item,{rules:[{required:!0,message:A.name.message}],label:F.name.label,name:F.name.name,children:(0,S.jsx)(o.Z,{autoComplete:"off",className:"max-w-[500px]"})}),(0,S.jsx)(l.Z.Item,{rules:[{required:!0,message:A.price.message}],label:F.price.label,name:F.price.name,children:(0,S.jsx)(m.Z,{stringMode:!0,min:0,className:"w-full sm:w-[500px]",addonAfter:"\u20ba"})}),(0,S.jsx)(l.Z.Item,{rules:[{required:!0,message:A.stock.message}],label:F.stock.label,name:F.stock.name,children:(0,S.jsx)(o.Z,{type:"number",min:1,className:"max-w-[500px]",addonAfter:"adet"})}),(0,S.jsx)(l.Z.Item,{label:F.descriptionn.label,name:F.descriptionn.name,children:(0,S.jsx)(o.Z.TextArea,{rows:4,maxLength:5e3,className:"!max-w-[500px]"})}),(0,S.jsx)(l.Z.Item,{rules:[{required:!0,message:A.categories.message}],label:F.categories.label,name:F.categories.name,children:(0,S.jsx)(d.Z,{defaultValue:n?W.categories:[],labelInValue:!0,mode:"multiple",className:"max-w-[500px]",children:X.map((function(e){return(0,S.jsx)(d.Z.Option,{children:e.name},e.id)}))})}),(0,S.jsxs)("div",{className:"max-w-[500px] mb-4 flex flex-row items-center space-x-4",children:[D&&(0,S.jsx)(o.Z,{className:"max-w-[500px]",value:R,onChange:function(e){return U(e.target.value)}}),(0,S.jsxs)(p.Z,{className:"m-0",onClick:ne,children:[D?"":"Yeni ","Olu\u015ftur"]})]}),n&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(l.Z.Item,{label:"T\u0131klanma Say\u0131s\u0131",children:(0,S.jsx)(o.Z,{disabled:!0,value:W.showCount,className:"max-w-[500px]"})}),(0,S.jsx)(l.Z.Item,{label:"Sat\u0131\u015fa Sunuldu\u011fu Tarih",children:(0,S.jsx)(o.Z,{className:"max-w-[500px]",disabled:!0,value:g()(W.createdAt.toString()).format("DD/MM/YYYY HH:mm")})})]}),(0,S.jsx)(l.Z.Item,{className:"max-w-[500px] flex flex-row justify-end ",children:(0,S.jsx)(p.Z,{type:"primary",htmlType:"submit",children:"Kaydet"})})]}),(0,S.jsx)(x.Z,{visible:z.visible,footer:null,title:null,onCancel:function(){return G({url:"",visible:!1})},width:500,bodyStyle:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,S.jsx)("img",{src:z.url,alt:"clicked-img",className:"object-contain"})})]})}},3845:function(e,a,n){n.d(a,{o:function(){return t},y:function(){return r}});var t=function(e){return new Promise((function(a,n){var t=new FileReader;t.onload=function(e){var n;a(null===(n=e.target)||void 0===n?void 0:n.result)},t.onerror=function(e){n(e)},t.readAsDataURL(e)}))},r=function(e){return"data:image/png;base64,"+e}},2966:function(e,a,n){n.r(a);n(2791);var t=n(9185),r=n(184);a.default=function(){return(0,r.jsx)("div",{className:"m-3 ",children:(0,r.jsx)("div",{className:"w-full md:max-w-[500px]",children:(0,r.jsx)(t.Z,{isEdit:!1})})})}}}]);
//# sourceMappingURL=966.edfe7c36.chunk.js.map